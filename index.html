<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thumbnail Generator - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏õ‡∏Å‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠</title>
    <link rel="stylesheet" href="/styles/thumbnail-generator.css">
    <link rel="stylesheet" href="/styles/conversion-modal.css">
    <link rel="stylesheet" href="/client/css/floating-home.css">
    <script src="/client/js/auth.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        (async function () {
            await protectPage('thumbnail', 'can_view');
        })();
    </script>
</head>
<style>
    /* Logo Grid Styles */
    .logo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 0.5rem;
        margin-top: 0.5rem;
        max-height: 200px;
        overflow-y: auto;
        padding: 4px;
    }

    .logo-option {
        border: 2px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: 0.5rem;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        background: var(--bg-secondary);
    }

    .logo-option:hover {
        border-color: var(--primary);
        transform: translateY(-2px);
    }

    .logo-option.active {
        border-color: var(--primary);
        background: rgba(var(--primary-rgb), 0.1);
        box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
    }

    .logo-preview {
        width: 100%;
        aspect-ratio: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #000;
        border-radius: var(--radius-sm);
        overflow: hidden;
    }

    .logo-preview img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .logo-preview.no-logo {
        color: #666;
        font-size: 0.8rem;
    }

    .logo-option span {
        font-size: 0.8rem;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }
</style>

<body>
    <div class="container">
        <header>
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <a href="/dashboard.html"
                        style="text-decoration: none; color: var(--text); font-size: 1.5rem; transition: transform 0.2s;"
                        onmouseover="this.style.transform='translateX(-5px)'"
                        onmouseout="this.style.transform='translateX(0)'">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö
                    </a>
                    <h1 style="margin: 0;">üé¨ Thumbnail Generator</h1>
                </div>
                <div
                    style="font-size: 0.8rem; color: #666; background: #f0f0f0; padding: 4px 12px; border-radius: 12px; font-family: monospace;">
                    v2.5.0
                </div>
            </div>
            <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏õ‡∏Å‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ö‡∏ö‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û - ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á ‡πÅ‡∏•‡∏∞ HLS Stream</p>
        </header>

        <!-- Mode Selection -->
        <section class="mode-section" style="margin-bottom: 2rem;">
            <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</h2>
            <div class="mode-options" style="display: flex; gap: 1rem;">
                <button class="mode-btn active" data-mode="static" data-tooltip="‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏ô‡∏¥‡πà‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ 1-3 ‡∏â‡∏≤‡∏Å">
                    <span style="font-size: 1.5rem; display: block; margin-bottom: 0.5rem;">üì∑</span>
                    <span style="font-weight: bold; display: block;">‡∏†‡∏≤‡∏û‡∏ô‡∏¥‡πà‡∏á (Static)</span>
                </button>
                <button class="mode-btn" data-mode="gif" data-tooltip="‡∏™‡∏£‡πâ‡∏≤‡∏á GIF Animation ‡∏à‡∏≤‡∏Å‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠">
                    <span style="font-size: 1.5rem; display: block; margin-bottom: 0.5rem;">üé¨</span>
                    <span style="font-weight: bold; display: block;">GIF Animation</span>
                </button>
            </div>
        </section>

        <!-- Layout Selection (Wrapped to hide in GIF mode) -->
        <section class="template-section" id="staticLayoutSection">
            <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏â‡∏≤‡∏Å</h2>
            <div class="template-options">
                <div class="template-card active" data-layout="single">
                    <div class="template-preview single-preview">
                        <div class="preview-box">1</div>
                    </div>
                    <h3>‡∏†‡∏≤‡∏û‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß</h3>
                    <p>1 ‡∏â‡∏≤‡∏Å</p>
                </div>
                <div class="template-card" data-layout="triple">
                    <div class="template-preview triple-preview">
                        <div class="preview-box">1</div>
                        <div class="preview-box">2</div>
                        <div class="preview-box">3</div>
                    </div>
                    <h3>3 ‡∏â‡∏≤‡∏Å</h3>
                    <p>3 ‡∏â‡∏≤‡∏Å</p>
                </div>
            </div>
        </section>

        <!-- Size Selection -->
        <section class="template-section">
            <h2>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î</h2>
            <div class="size-options">
                <div class="size-card active" data-size="500x375">
                    <div class="size-preview">
                        <div class="size-box" style="width: 100px; height: 75px;"></div>
                    </div>
                    <h3>500 x 375 px</h3>
                    <p>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 4:3</p>
                </div>
                <div class="size-card" data-size="500x281">
                    <div class="size-preview">
                        <div class="size-box" style="width: 100px; height: 56.2px;"></div>
                    </div>
                    <h3>500 x 281 px</h3>
                    <p>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 16:9</p>
                </div>
            </div>
        </section>

        <!-- Image Upload Section (NEW) -->
        <section class="upload-section" id="imageUploadSection">
            <h2>üì∏ ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</h2>
            <p style="color: #666; margin-bottom: 1rem;">‡∏™‡∏£‡πâ‡∏≤‡∏á Thumbnail ‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Ñ‡∏õ‡∏à‡∏≤‡∏Å‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠</p>

            <div class="upload-area" id="imageUploadArea">
                <input type="file" id="directImageInput" accept="image/*" multiple hidden>
                <div class="upload-placeholder">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="8.5" cy="8.5" r="1.5"></circle>
                        <polyline points="21 15 16 10 5 21"></polyline>
                    </svg>
                    <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                    <span>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JPG, PNG, GIF, WebP (‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ)</span>
                </div>
            </div>
        </section>

        <!-- Video Upload Section -->
        <section class="upload-section">
            <h2>üé¨ ‡∏´‡∏£‡∏∑‡∏≠ ‡πÅ‡∏Ñ‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠</h2>

            <!-- URL Input -->
            <div style="margin-bottom: 1.5rem;">
                <div style="display: flex; gap: 0.5rem; max-width: 600px; margin: 0 auto;">
                    <input type="text" id="videoUrlInput" placeholder="https://example.com/video.m3u8"
                        style="flex: 1; padding: 10px; border: 2px solid var(--border-color); border-radius: 8px;">
                    <button class="btn-primary" id="loadUrlBtn">‡πÇ‡∏´‡∏•‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå</button>
                </div>
            </div>

            <div class="upload-area" id="videoUploadArea">
                <input type="file" id="videoInput" accept="video/*" hidden>
                <div class="upload-placeholder">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≤‡∏Å‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
                    <span>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö MP4, MOV, AVI, M3U8</span>
                </div>
            </div>

            <!-- Recent Files Button -->
            <div style="margin-top: 1rem; text-align: right;">
                <button class="btn-secondary" id="openRecentBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                        <polyline points="13 2 13 9 20 9"></polyline>
                    </svg>
                    ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                </button>
            </div>
        </section>

        <!-- Recent Files Modal -->
        <div id="recentFilesModal" class="modal-overlay" style="display: none;">
            <div class="modal-content" style="max-width: 600px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2 style="margin: 0;">üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (24‡∏ä‡∏°.)</h2>
                    <button class="btn-secondary" id="refreshFilesBtn" style="padding: 4px 8px;">üîÑ</button>
                </div>
                <div id="fileList"
                    style="max-height: 400px; overflow-y: auto; margin: 1rem 0; border: 1px solid #eee; border-radius: 8px;">
                    <!-- File Items will be injected here -->
                    <div style="text-align: center; padding: 2rem; color: #666;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <button class="btn-secondary" id="deleteAllFilesBtn"
                        style="padding: 8px 16px; color: red; border-color: rgba(255,0,0,0.3); display: none;">
                        üóëÔ∏è ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                    <div style="flex: 1;"></div>
                    <button class="btn-secondary" id="closeRecentBtn">‡∏õ‡∏¥‡∏î</button>
                </div>
            </div>
        </div>

        <!-- Video Preview & Frame Capture -->
        <section class="capture-section" id="captureSection" style="display: none;">
            <!-- GIF Controls (Hidden by default) -->
            <div id="gifControls"
                style="display: none; margin-bottom: 1rem; padding: 1rem; background: rgba(0,0,0,0.2); border-radius: var(--radius-md);">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button id="recordGifBtn" class="btn-primary" style="background: #ff3b30; min-width: 150px;">
                            üî¥ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î
                        </button>
                        <span id="recordingStatus"
                            style="display: none; color: #ff3b30; font-weight: bold; font-family: monospace; font-size: 1.2rem;">‚óè
                            00.0s (0 frames)</span>
                    </div>
                    <div style="font-size: 0.9rem; color: #888;">
                        ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:
                        <select id="gifFps"
                            style="padding: 4px; border-radius: 4px; border: 1px solid #444; background: #222; color: #fff;">
                            <option value="10">Low (10 FPS)</option>
                            <option value="15" selected>Normal (15 FPS)</option>
                            <option value="20">High (20 FPS)</option>
                        </select>
                    </div>
                </div>
                <p style="margin-top: 0.5rem; font-size: 0.8rem; color: #aaa;">* ‡∏Å‡∏î "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏≠‡∏±‡∏î" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡πá‡∏ö‡∏†‡∏≤‡∏û
                    ‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠ "‡∏´‡∏¢‡∏∏‡∏î"</p>
            </div>
            <h2>‡πÅ‡∏Ñ‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠</h2>

            <div class="video-preview-container" id="videoPreviewContainer">
                <video id="videoPlayer" controls preload="auto"></video>
                <canvas id="captureCanvas" style="display: none;"></canvas>
            </div>

            <input type="file" id="videoInput"
                accept="video/mp4,video/quicktime,video/x-msvideo,video/x-matroska,video/mp2t,.ts"
                style="display: none;">

            <div class="controls-grid" id="controlsGrid">
                <div class="timeline-info">
                    <span id="currentTime">00:00</span>
                    <span id="duration">00:00</span>
                </div>
                <input type="range" id="videoTimeline" min="0" max="100" value="0" step="0.1">
                <button class="btn-capture" id="captureBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    ‡πÅ‡∏Ñ‡∏õ‡∏†‡∏≤‡∏û (<span id="captureCount">0</span>/<span id="maxCaptures">1</span>)
                </button>
            </div>
        </section>

        <!-- Captured Frames -->
        <section class="frames-section" id="framesSection" style="display: none;">
            <h2>‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÅ‡∏Ñ‡∏õ</h2>
            <div class="frames-grid" id="framesGrid"></div>
            <div class="frames-actions" style="margin-top: 1rem; display: flex; gap: 1rem;">
                <button class="btn-secondary" id="addExternalBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
                </button>
                <button class="btn-secondary" id="clearFramesBtn"
                    style="background: rgba(255, 59, 48, 0.1); color: #ff3b30; border: 1px solid rgba(255, 59, 48, 0.2);">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                    ‡∏•‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
            </div>
            <input type="file" id="externalImageInput" accept="image/*" hidden>
        </section>


        <!-- Thumbnail Preview & Editor -->
        <section class="editor-section" id="editorSection" style="display: none;">
            <h2>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Thumbnail</h2>

            <div class="editor-container">
                <div class="canvas-wrapper">
                    <canvas id="thumbnailCanvas"></canvas>
                    <div class="canvas-instructions" id="canvasInstructions" style="display: none;">
                        <p>üí° <strong>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3 ‡∏â‡∏≤‡∏Å:</strong></p>
                        <p>‚Ä¢ <strong>‡∏•‡∏≤‡∏Å‡∏£‡∏π‡∏õ</strong>: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≤‡∏Å‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤</p>
                        <p>‚Ä¢ <strong>‡∏ã‡∏π‡∏°</strong>: ‡πÉ‡∏ä‡πâ Mouse Wheel ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
                    </div>
                </div>

                <div class="editor-controls">
                    <!-- Zoom/Pan Controls for Single Layout -->
                    <div class="control-group" id="singleControls" style="display: none;">
                        <label>üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ã‡∏π‡∏° (‡∏†‡∏≤‡∏û‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß)</label>
                        <div class="zoom-pan-controls">
                            <button class="btn-small action-btn" data-action="zoom" data-index="0"
                                data-amount="-0.1">üîç-</button>
                            <span id="singleZoom">100%</span>
                            <button class="btn-small action-btn" data-action="zoom" data-index="0"
                                data-amount="0.1">üîç+</button>
                            <!-- Inverted Pan: Left arrow (-) moves image Left (so we need POSITIVE delta to reduce 'imagePositions' if logic was valid? Wait. 
                            Let's follow the user finding 'swapped'. 
                            Currently: Right Arrow -> +5. User says 'Inverted'.
                            So Right Arrow should be -5. Left Arrow should be +5.
                            Wait, logic in JS: 
                            userOffsetX = maxOffset * ((50 - pos) / 100)
                            If pos increases, (50-pos) decreases. Offset becomes more negative (Left).
                            So increasing pos moves image Left.
                            If I press Right Arrow, I want Image to move Right (Positive Offset).
                            So I need (50-pos) to Increase. So pos must Decrease.
                            So Right Arrow should DECREASE pos. (-5).
                            -->
                            <button class="btn-small action-btn" data-action="pan-h" data-index="0"
                                data-amount="5">‚Üê</button>
                            <button class="btn-small action-btn" data-action="pan-h" data-index="0"
                                data-amount="-5">‚Üí</button>
                            <button class="btn-small action-btn" data-action="pan-v" data-index="0"
                                data-amount="5">‚Üë</button>
                            <button class="btn-small action-btn" data-action="pan-v" data-index="0"
                                data-amount="-5">‚Üì</button>
                        </div>
                    </div>

                    <!-- Zoom/Pan Controls for Triple Layout -->
                    <div class="control-group" id="tripleControls" style="display: none;">
                        <label>üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ã‡∏π‡∏° (3 ‡∏â‡∏≤‡∏Å)</label>
                        <div class="triple-controls-grid">
                            <div class="control-item">
                                <label>‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 1:</label>
                                <div class="zoom-pan-controls">
                                    <button class="btn-small action-btn" data-action="zoom" data-index="0"
                                        data-amount="-0.1">üîç-</button>
                                    <span id="zoom0">100%</span>
                                    <button class="btn-small action-btn" data-action="zoom" data-index="0"
                                        data-amount="0.1">üîç+</button>
                                    <button class="btn-small action-btn" data-action="pan-h" data-index="0"
                                        data-amount="5">‚Üê</button>
                                    <button class="btn-small action-btn" data-action="pan-h" data-index="0"
                                        data-amount="-5">‚Üí</button>
                                    <button class="btn-small action-btn" data-action="pan-v" data-index="0"
                                        data-amount="5">‚Üë</button>
                                    <button class="btn-small action-btn" data-action="pan-v" data-index="0"
                                        data-amount="-5">‚Üì</button>
                                </div>
                            </div>
                            <div class="control-item">
                                <label>‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 2:</label>
                                <div class="zoom-pan-controls">
                                    <button class="btn-small action-btn" data-action="zoom" data-index="1"
                                        data-amount="-0.1">üîç-</button>
                                    <span id="zoom1">100%</span>
                                    <button class="btn-small action-btn" data-action="zoom" data-index="1"
                                        data-amount="0.1">üîç+</button>
                                    <button class="btn-small action-btn" data-action="pan-h" data-index="1"
                                        data-amount="5">‚Üê</button>
                                    <button class="btn-small action-btn" data-action="pan-h" data-index="1"
                                        data-amount="-5">‚Üí</button>
                                    <button class="btn-small action-btn" data-action="pan-v" data-index="1"
                                        data-amount="5">‚Üë</button>
                                    <button class="btn-small action-btn" data-action="pan-v" data-index="1"
                                        data-amount="-5">‚Üì</button>
                                </div>
                            </div>
                            <div class="control-item">
                                <label>‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 3:</label>
                                <div class="zoom-pan-controls">
                                    <button class="btn-small action-btn" data-action="zoom" data-index="2"
                                        data-amount="-0.1">üîç-</button>
                                    <span id="zoom2">100%</span>
                                    <button class="btn-small action-btn" data-action="zoom" data-index="2"
                                        data-amount="0.1">üîç+</button>
                                    <button class="btn-small action-btn" data-action="pan-h" data-index="2"
                                        data-amount="5">‚Üê</button>
                                    <button class="btn-small action-btn" data-action="pan-h" data-index="2"
                                        data-amount="-5">‚Üí</button>
                                    <button class="btn-small action-btn" data-action="pan-v" data-index="2"
                                        data-amount="5">‚Üë</button>
                                    <button class="btn-small action-btn" data-action="pan-v" data-index="2"
                                        data-amount="-5">‚Üì</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Zoom/Pan Controls for GIF Mode -->
                    <div class="control-group" id="gifZoomControls" style="display: none;">
                        <label>üîß ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏ã‡∏π‡∏° (GIF)</label>
                        <div class="zoom-pan-controls">
                            <button class="btn-small action-btn" data-action="gif-zoom" data-amount="-0.1">üîç-</button>
                            <span id="gifZoom">100%</span>
                            <button class="btn-small action-btn" data-action="gif-zoom" data-amount="0.1">üîç+</button>
                            <button class="btn-small action-btn" data-action="gif-pan-h" data-amount="5">‚Üê</button>
                            <button class="btn-small action-btn" data-action="gif-pan-h" data-amount="-5">‚Üí</button>
                            <button class="btn-small action-btn" data-action="gif-pan-v" data-amount="5">‚Üë</button>
                            <button class="btn-small action-btn" data-action="gif-pan-v" data-amount="-5">‚Üì</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</label>
                        <input type="text" id="textInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°...">
                        <div class="text-controls">
                            <input type="number" id="fontSize" value="24" min="10" max="80" style="width: 60px;">
                            <input type="color" id="textColor" value="#ffffff">
                            <select id="fontFamily">
                                <option value="Arial">Arial</option>
                                <option value="Impact">Impact</option>
                                <option value="'Courier New'">Courier New</option>
                                <option value="Georgia">Georgia</option>
                            </select>
                            <button id="addTextBtn" class="btn-small">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (X/Y)</label>
                        <div class="slider-group">
                            <div class="slider-item">
                                <label>‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (X):</label>
                                <input type="range" id="textPosX" min="0" max="100" value="50" class="position-slider">
                                <span id="textPosXValue">50%</span>
                            </div>
                            <div class="slider-item">
                                <label>‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á (Y):</label>
                                <input type="range" id="textPosY" min="0" max="100" value="50" class="position-slider">
                                <span id="textPosYValue">50%</span>
                            </div>
                        </div>
                    </div>

                    <div class="control-group">
                        <label>
                            <input type="checkbox" id="textStroke">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                        </label>
                        <label>
                            <input type="checkbox" id="textShadow">
                            ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
                        </label>
                    </div>

                    <!-- Logo Selection -->
                    <div class="control-group">
                        <label>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏•‡πÇ‡∏Å‡πâ</label>
                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin: 0.5rem 0;">
                            ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß
                        </p>
                        <div class="logo-grid">
                            <!-- Logos will be loaded from API -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="action-buttons" style="flex-direction: column; gap: 1rem;">
                <div style="width: 100%;">
                    <label for="filenameInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå
                        (SEO):</label>
                    <input type="text" id="filenameInput" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå (‡πÄ‡∏ä‡πà‡∏ô minecraft-survival-ep1)"
                        style="width: 100%; padding: 0.8rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--bg-primary); color: var(--text-primary);">
                </div>
                <div style="display: flex; gap: 1rem; width: 100%;">
                    <button class="btn-secondary" id="resetBtn" style="flex: 1;">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                    <button class="btn-primary" id="downloadBtn" style="flex: 2;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Thumbnail
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Conversion Progress Modal -->
    <div id="conversionModal" class="conversion-modal" style="display: none;">
        <div class="conversion-modal-content">
            <h3>üé¨ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ß‡∏µ‡∏î‡∏µ‡πÇ‡∏≠...</h3>

            <div class="conversion-info">
                <div class="info-row">
                    <span class="info-label">‡πÑ‡∏ü‡∏•‡πå:</span>
                    <span id="conversionFileCount">1/1</span>
                </div>
                <div class="info-row">
                    <span class="info-label">‡πÑ‡∏ü‡∏•‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</span>
                    <span id="conversionFileName">video.ts</span>
                </div>
            </div>

            <div class="conversion-progress">
                <div class="progress-bar-container">
                    <div id="conversionProgressBar" class="progress-bar-fill"></div>
                </div>
                <div class="progress-text">
                    <span id="conversionPercent">0%</span>
                </div>
            </div>

            <div class="conversion-stats">
                <div class="stat-item">
                    <span class="stat-label">‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
                    <span id="conversionETA">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">‚ö° ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß:</span>
                    <span id="conversionSpeed">-</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">üì¶ ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠:</span>
                    <span id="conversionRemaining">-</span>
                </div>
            </div>

            <div class="conversion-message" id="conversionMessage"></div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/scripts/gif.js"></script>
    <script src="/scripts/thumbnail-generator.js?v=01112026_1817"></script>
    <!-- Floating Home Button -->
    <a href="/dashboard.html" class="floating-home-btn" title="‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å">üè†</a>
</body>

</html>